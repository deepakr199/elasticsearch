<!DOCTYPE html>

<html ng-app="shopApp">
    <head>
        <title>E-Shop</title>
<link rel="stylesheet" media="screen" href="@routes.Assets.at("bootstrap/css/bootstrap.css")" />
<link rel="stylesheet" media="screen" href="@routes.Assets.at("bootstrap/font-awesome-4.1.0/css/font-awesome.min.css")" />
<link rel="stylesheet" media="screen" href="@routes.Assets.at("stylesheets/main.css")" />
<link rel="stylesheet" media="screen" href="@routes.Assets.at("stylesheets/responsive.css")" />

<script src="@routes.Assets.at("javascripts/jquery.js")" type="text/javascript"></script>
<script src="@routes.Assets.at("bootstrap/js/bootstrap.js")" type="text/javascript"></script>
<script src="@routes.Assets.at("bootstrap/js/bootstrap-typeahead.js")" type="text/javascript"></script>
<script src="@routes.Assets.at("angularjs/angular.js")" type="text/javascript"></script>
<script src="@routes.Assets.at("angularjs/angular-route.js")" type="text/javascript"></script>
<script src="@routes.Assets.at("angularjs/angular-resource.min.js")" type="text/javascript"></script>
<script src="@routes.Assets.at("javascripts/bootpag.js")" type="text/javascript"></script>
<!-- <script src="http://angular-ui.github.io/bootstrap/ui-bootstrap-tpls-0.3.0.min.js" type="text/javascript"></script> -->


<script src="@routes.Assets.at("javascripts/routes.js")" type="text/javascript"></script>
    </head>
    <body>
    
    
	<header id="header" ><!--header-->
		<div class="header_top"><!--header_top-->
			<div class="container">
				<div class="row">

				</div>
			</div>
		</div><!--/header_top-->
		
		<div class="header-middle"><!--header-middle-->
			<div class="container">
				<div class="row">

				</div>
			</div>
		</div><!--/header-middle-->
	
		<div class="header-bottom"><!--header-bottom-->
			<div class="container">
				<div class="row">

					<!-- <div class="col-sm-9">
						<input type="text" name="searchText" autocomplete="off" placeholder="Search..." class="typeahead form-control" id="searchText" width="400px" >
					<button class="button search" type="submit" onclick="callFunc($('#searchText').val())"><span class="glyphicon glyphicon-search"></span></button>
					</div> -->
					<input type="hidden" id="brandType" value=""/>
					<input type="hidden" id="brandTypeId" value=""/>
					<input type="hidden" id="categoryType" value=""/>
					<input type="hidden" id="id" value=""/>
		<div class="">
        <form class="" role="search">
        <div class="input-group">
		<input type="text" name="searchText" autocomplete="off" placeholder="Search..." class="typeahead form-control" id="searchText" />
            <div class="input-group-btn">
                <button class="btn btn-default" type="submit" onclick="callFunc($('#searchText').val())" ><i class="glyphicon glyphicon-search"></i></button>
            </div>
        </div>
        </form>
        </div>
					
				</div>
				</div>
			</div>
	</header>
	
	<section>
		<div class="container">
		<ol class="breadcrumb">
  <li id="home"><a href="" onclick="breadcrumbcall('','')" >Home</a></li>
  

</ol>
		</div>
	</section>
	
       <div ng-view=""></div>
       
    	<footer id="footer"><!--Footer-->
		<div class="footer-top">
			<div class="container">

			</div>
		</div>
		
		<div class="footer-widget">
			<div class="container">
				<div class="row">
					<div class="col-sm-2">
						<div class="single-widget">
							<h2>Service</h2>
							<ul class="nav nav-pills nav-stacked">
								<li><a href="">Online Help</a></li>
								<li><a href="">Contact Us</a></li>
								<li><a href="">Order Status</a></li>
								<li><a href="">Change Location</a></li>
								<li><a href="">FAQ’s</a></li>
							</ul>
						</div>
					</div>
					<div class="col-sm-2">
						<div class="single-widget">
							<h2>Quock Shop</h2>
							<ul class="nav nav-pills nav-stacked">
								<li><a href="">T-Shirt</a></li>
								<li><a href="">Mens</a></li>
								<li><a href="">Womens</a></li>
								<li><a href="">Gift Cards</a></li>
								<li><a href="">Shoes</a></li>
							</ul>
						</div>
					</div>
					<div class="col-sm-2">
						<div class="single-widget">
							<h2>Policies</h2>
							<ul class="nav nav-pills nav-stacked">
								<li><a href="">Terms of Use</a></li>
								<li><a href="">Privecy Policy</a></li>
								<li><a href="">Refund Policy</a></li>
								<li><a href="">Billing System</a></li>
								<li><a href="">Ticket System</a></li>
							</ul>
						</div>
					</div>
					<div class="col-sm-2">
						<div class="single-widget">
							<h2>About Shopper</h2>
							<ul class="nav nav-pills nav-stacked">
								<li><a href="">Company Information</a></li>
								<li><a href="">Careers</a></li>
								<li><a href="">Store Location</a></li>
								<li><a href="">Affillate Program</a></li>
								<li><a href="">Copyright</a></li>
							</ul>
						</div>
					</div>
					<div class="col-sm-3 col-sm-offset-1">
						<div class="single-widget">
							<h2>About Shopper</h2>
							<form action="#" class="searchform">
								<input type="text" placeholder="Your email address" />
								<button type="submit" class="btn btn-default"><i class="fa fa-arrow-circle-o-right"></i></button>
								<p>Get the most recent updates from <br />our site and be updated your self...</p>
							</form>
						</div>
					</div>
					
				</div>
			</div>
		</div>
		
		<div class="footer-bottom">
			<div class="container">
				<div class="row">
					<p class="pull-left">Copyright © 2013 E-Shopper. All rights reserved.</p>
					<p class="pull-right">Designed by <span><a target="_blank" href="http://www.themeum.com">Themeum</a></span></p>
				</div>
			</div>
		</div>
		
	</footer><!--/Footer-->
       <script>

       
       
       
       $(function(){
    	  
     	var productmore = $('<li class="productmore"><a href="" class="blue"><span class="pull-right">more..</span></a></li>');
      	var productless = $('<li class="productless" ><a href="" class="blue"><span class="pull-right">less..</span></a></li>');   
    	   
  	    var brandmore = $('<li class="brandmore"><a href="" class="blue"><span class="pull-right">more..</span></a></li>');
  	    var brandless = $('<li class="brandless" ><a href="" class"blue"><span class="pull-right">less..</span></a></li>');
  	    
  	    var subcategorymore = $('<li class="subcategorymore"><a href="" class="blue"><span class="pull-right">more..</span></a></li>');
  	    var subcategoryless = $('<li class="subcategoryless"><a href="" class="blue"><span class="pull-right">less..</span></a></li>');
  	    

  	    $('body').on('click','.subcategorymore',function(e){

  	        e.preventDefault();
  	        $(this).remove();    
  	        $('ul.subcategory').children().show();
  	        $('ul.subcategory').append(subcategoryless);
  	        return false;
  	    });

  	    $('body').on('click','.subcategoryless',function(e){
  	        e.preventDefault();
  	        $(this).remove();
  	        $('ul.subcategory').children('li:gt(10)').hide();
  	        $('ul.subcategory').append(subcategorymore);
  	        return false;
  	   });
  	    
  	    $('body').on('click','.productmore',function(e){

  	        e.preventDefault();
  	        $(this).remove();    
  	        $('ul.product').children().show();
  	        $('ul.product').append(productless);
  	        return false;
  	    });

  	    $('body').on('click','.productless',function(e){
  	        e.preventDefault();
  	        $(this).remove();
  	        $('ul.product').children('li:gt(10)').hide();
  	        $('ul.product').append(productmore);
  	        return false;
  	   });
  	    
  	    $('body').on('click','.brandmore',function(e){

  	        e.preventDefault();
  	        $(this).remove();    
  	        $('ul.brand').children().show();
  	        $('ul.brand').append(brandless);
  	        return false;
  	    });

  	    $('body').on('click','.brandless',function(e){
  	        e.preventDefault();
  	        $(this).remove();
  	        $('ul.brand').children('li:gt(10)').hide();
  	        $('ul.brand').append(brandmore);
  	        return false;
  	   });

    	
    	   	var categoryType = {};
    	   	var id = {};
    	    var label = {};
    	    var searchText = {};
    	    var breadcrumb = {};
    		$('.typeahead').typeahead({
    		    minLength: 3,
    		    items:12,
    		    source: function(typeahead,query){
    		    	
  		    	  $.ajax({
  		    		  url:'/shop/lookup?searchText='+query,
  		    		  type: "GET", 
  		    		  dataType: "JSON",
  		    		  success:function(data){	
  		    			  
  		    		   var labels = [];
  		               $.each(data, function (i, item) {     
  		                   label[item.title] = item.display;
  		                   id[item.title] = item.id;
  		                   categoryType[item.title] = item.type;
  		                   searchText[item.title] = item.searchText;
  		                   breadcrumb[item.title] = item.breadcrumb;
  		                   labels.push(item.title);
  		               });    
  		    	          typeahead.process(labels);    		 
  	                
  		    	  }
  	       		});   
  	    	    },
  	    	   // property: 'title',
  	    	 	 onselect: function (item) {
  	    	 		$('#categoryblock').show();
  					$('#subcategoryblock').show();
  					$('#productController').show();
  	    	 		 if(categoryType[item] == 'categories'){
  	    	 			 $('#searchText').val(searchText[item]);
   						 angular.element('#categoryController').scope().getByCategory(id[item], categoryType[item], breadcrumb[item]);
  	    	 		 }else{
  	    	 			$('#searchText').val(searchText[item]);
  	  				 	callFunc(searchText[item]);
  	    	 		 }
  	    	 	 },
    		    
  	    	    updater: function (item) {
  	    	        return item;
  	    	    },
  	    	    highlighter: function (item) {
  	    	        return label[item];
  	    	    }
	    	    
    		});
    		
       });
       
       function callFunc(searchText){
			angular.element('#itemController').scope().myFunction(searchText);
       }
       
       function sorter(sorter){
			angular.element('#itemController').scope().sorter(sorter);
       }
       
       function filter(){
			angular.element('#itemController').scope().filter();
      }
       
       function breadcrumbcall(id,categoryType){
    	   
    	    if(categoryType == ''){
    	    	$('ol.breadcrumb li:not(:first)').remove();
				$('#categoryblock').show();
				$('#subcategoryblock').show();
				$('#productController').show();
    	    }else if(categoryType == 'categories.category_name.raw_category_name'){
				var html = "<li id='home'>" + $('ol.breadcrumb li#home').html() + "</li>"+"<li id='category'>" + $('ol.breadcrumb li#category').html() + "</li>";
				$('ol.breadcrumb').html(html);
				$('#subcategoryblock').show();
				$('#productController').show();
				$('input#searchText').val("");
				
			}else if(categoryType == 'subcategories'){
				var categoryhtml = $('ol.breadcrumb li#category').html();
				if (typeof categoryhtml === "undefined") {
					categoryhtml = "";
				}else{
					categoryhtml = "<li id='category'>" + categoryhtml + "</li>";
				}
				var html = "<li id='home'>" + $('ol.breadcrumb li#home').html() + "</li>"+categoryhtml+"<li id='subcategory'>" + $('ol.breadcrumb li#subcategory').html() + "</li>";
				$('ol.breadcrumb').html(html);
				categoryType = "categories.category_name.raw_category_name";
				$('#productController').show();
				$('input#searchText').val("");

    	    }
			$('#brandType').val("");
		    $('#brandTypeId').val("");
			$('#categoryType').val(categoryType);
		    $('#id').val(id);
			$('input#searchText').val("");
			angular.element('#itemController').scope().itemFilter("",categoryType,id);
       }

       </script>
       
    
    </body>
</html>
